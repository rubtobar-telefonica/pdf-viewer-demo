<div class="min-h-screen bg-base-200 p-6">
  <div class="mx-auto flex max-w-6xl flex-col gap-6 lg:flex-row lg:items-start">
    <div class="w-full max-h-[calc(100vh-6rem)] overflow-hidden rounded-box lg:w-3/4">
      <div role="tablist" class="tabs tabs-lift tabs-lg w-full">
        @for (doc of documents; track doc.id) {
          <input
            type="radio"
            name="pdf-tabs"
            role="tab"
            class="tab"
            [attr.aria-label]="doc.label"
            [checked]="isActive(doc)"
            (change)="selectDocument(doc)"
          />
          <div
            role="tabpanel"
            class="tab-content rounded-box rounded-t-none border-base-300 bg-base-100 max-h-[calc(100vh-10rem)] overflow-hidden"
            [class.hidden]="!isActive(doc)"
          >
            @if (isActive(doc)) {
              <div class="relative h-[calc(100vh-12rem)] lg:h-[calc(100vh-10rem)]">
                <ngx-extended-pdf-viewer
                  class="h-full w-full"
                  [src]="doc.src"
                  [(page)]="doc.currentPage"
                  [textLayer]="true"
                  [showSidebarButton]="false"
                  [showToolbar]="false"
                  [zoom]="doc.zoom"
                  (pagesLoaded)="onPagesLoaded($event, doc)"
                  useBrowserLocale="true"
                ></ngx-extended-pdf-viewer>
                @if (doc.currentHighlight?.page === doc.currentPage) {
                  <div
                    class="pointer-events-none absolute left-0 top-0 z-20 rounded-lg border-2 border-warning bg-warning"
                    [style.opacity]="0.25"
                    [style.top.%]="doc.currentHighlight!.top"
                    [style.left.%]="doc.currentHighlight!.left"
                    [style.width.%]="doc.currentHighlight!.width"
                    [style.height.%]="doc.currentHighlight!.height"
                  ></div>
                }
              </div>
            }
          </div>
        }
      </div>
    </div>
    <div class="flex w-full max-w-sm flex-col gap-6 rounded-box bg-base-100 p-6 shadow lg:w-1/4 lg:max-h-[calc(100vh-6rem)] lg:overflow-auto">
      <div>
        <h2 class="text-xl font-bold">Evidencias</h2>
        <p class="text-sm opacity-70">
          Elige la evidencia para que se muestre en el documento.
        </p>
      </div>
      <div class="space-y-6">
        @for (doc of documents; track doc.id) {
          <div class="space-y-3">
            <h3 class="text-base font-semibold" [class.text-primary]="isActive(doc)">
              {{ doc.label }}
            </h3>
            <div class="flex flex-col gap-2">
              @for (button of doc.pageButtons; track button.page) {
                <button class="btn btn-sm" type="button" (click)="goToEvidence(button, doc)">
                  {{ button.label }} (p√°g. {{ button.page }})
                </button>
              }
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</div>
