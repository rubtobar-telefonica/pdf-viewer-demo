<div class="min-h-screen bg-base-300 p-6">
  <div class="mx-auto flex max-w-6xl flex-col gap-6 lg:flex-row lg:items-start">
    <div class="w-full max-h-[calc(100vh-6rem)] overflow-hidden lg:w-3/4">
      <div role="tablist" class="tabs tabs-lift tabs-lg w-full">
        @for (doc of documents; track doc.id) {
        <input type="radio" name="pdf-tabs" role="tab" class="tab" [attr.aria-label]="doc.label"
          [checked]="isActive(doc)" (change)="selectDocument(doc)" />
        <div role="tabpanel"
          class="tab-content rounded-box rounded-t-none border-base-300 bg-base-100 max-h-[calc(100vh-10rem)] overflow-hidden"
          [class.hidden]="!isActive(doc)">
          @if (isActive(doc)) {
          <div class="relative h-[calc(100vh-12rem)] lg:h-[calc(100vh-10rem)]" [attr.data-doc-id]="doc.id">
            <ngx-extended-pdf-viewer class="h-full w-full" [src]="doc.src" [(page)]="doc.currentPage" [textLayer]="true"
              [showSidebarButton]="false" [showToolbar]="false" [zoom]="doc.zoom"
              (pagesLoaded)="onPagesLoaded($event, doc)" useBrowserLocale="true"></ngx-extended-pdf-viewer>
            @if (doc.currentHighlight?.page === doc.currentPage && doc.highlightOverlay) {
            <div class="pointer-events-none absolute left-0 top-0 z-20 rounded-lg border-2 border-warning bg-warning"
              [style.opacity]="0.25" [style.top.px]="doc.highlightOverlay.top"
              [style.left.px]="doc.highlightOverlay.left" [style.width.px]="doc.highlightOverlay.width"
              [style.height.px]="doc.highlightOverlay.height"></div>
            }
          </div>
          }
        </div>
        }
      </div>
    </div>
    <div
      class="flex w-full max-w-sm flex-col gap-6 rounded-box bg-base-100 p-6 shadow lg:w-1/4 lg:max-h-[calc(100vh-6rem)] lg:overflow-auto">
      <div>
        <h2 class="text-xl font-bold">Evidencias</h2>
        <p class="text-sm opacity-70">
          Elige la evidencia para que se muestre en el documento.
        </p>
      </div>
      <div class="space-y-6">
        @for (doc of documents; track doc.id) {
        <div class="space-y-3">
          <h3 class="text-base font-semibold" [class.text-primary]="isActive(doc)">
            {{ doc.label }}
          </h3>
          <div class="flex flex-col gap-2">
            @for (button of doc.pageButtons; track button.page) {
            <button class="btn btn-sm" type="button" (click)="goToEvidence(button, doc)">
              {{ button.label }} (p√°g. {{ button.page }})
            </button>
            }
          </div>
        </div>
        }
      </div>

      <div class="divider"></div>
      <div class="h-full object-center">
        <div class="flex w-full flex-1 items-center justify-center">
          <label class="flex cursor-pointer items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-70">
              <circle cx="12" cy="12" r="5" />
              <path
                d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" />
            </svg>
            <input type="checkbox" value="dark" class="toggle theme-controller" />
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="opacity-70">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </label>
        </div>
      </div>

    </div>
  </div>
</div>